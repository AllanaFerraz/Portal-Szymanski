<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Szymanski - Login e Cadastro</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --success-color: #2ecc71;
            --error-color: #e74c3c;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        /* Header Styles */
        header {
            width: 100%;
            max-width: 800px;
            margin-bottom: 30px;
        }

        .header-container {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            text-align: center;
        }

        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .portal-logo {
            max-height: 80px;
            width: auto;
        }

        .header-slogan {
            color: var(--dark-color);
            font-size: 1.1rem;
            font-weight: 500;
            margin: 0;
        }

        /* Container Principal */
        .main-container {
            display: flex;
            width: 100%;
            max-width: 900px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
            min-height: 550px;
        }

        /* Painel de Boas-vindas */
        .welcome-panel {
            flex: 1;
            background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%);
            color: white;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .welcome-panel::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
        }

        .welcome-content {
            position: relative;
            z-index: 1;
        }

        .welcome-panel h2 {
            font-size: 2rem;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .welcome-panel p {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .panel-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.9;
        }

        .feature-list {
            text-align: left;
            margin-top: 30px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            font-size: 0.95rem;
        }

        .feature-item i {
            margin-right: 10px;
            color: var(--light-color);
        }

        /* Form Container */
        .form-container {
            flex: 1;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .form-title {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.8rem;
            font-weight: 600;
        }

        /* User Type Selector */
        .user-type-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 25px;
        }

        .user-type-option {
            border: 2px solid #e0e0e0;
            border-radius: var(--border-radius);
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            background-color: #f9f9f9;
        }

        .user-type-option:hover {
            border-color: var(--secondary-color);
            background-color: #f0f8ff;
            transform: translateY(-2px);
        }

        .user-type-option.selected {
            border-color: var(--secondary-color);
            background-color: #e6f2ff;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        .user-type-option input {
            display: none;
        }

        .user-type-option div {
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark-color);
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-group input:focus, .form-group select:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        /* Button Styles */
        .btn-primary {
            width: 100%;
            padding: 14px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 10px;
        }

        .btn-primary:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            width: 100%;
            padding: 12px;
            background-color: transparent;
            color: var(--secondary-color);
            border: 2px solid var(--secondary-color);
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 10px;
        }

        .btn-secondary:hover {
            background-color: #f0f8ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        /* Links */
        .links-container {
            text-align: center;
            margin-top: 20px;
            font-size: 0.9rem;
        }

        .links-container a {
            color: var(--secondary-color);
            text-decoration: none;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin: 0 10px;
            padding: 8px 15px;
            border-radius: var(--border-radius);
        }

        .links-container a:hover {
            color: var(--primary-color);
            background-color: #f8f9fa;
            text-decoration: none;
        }

        /* Message Styles */
        .message {
            padding: 12px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            text-align: center;
            font-weight: 500;
            display: none;
        }

        .message.error {
            background-color: rgba(231, 76, 60, 0.1);
            color: var(--error-color);
            border: 1px solid rgba(231, 76, 60, 0.3);
            display: block;
        }

        .message.success {
            background-color: rgba(46, 204, 113, 0.1);
            color: var(--success-color);
            border: 1px solid rgba(46, 204, 113, 0.3);
            display: block;
        }

        /* Form Sections */
        .form-section {
            display: none;
        }

        .form-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cookie Banner */
        .cookie-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--primary-color);
            color: white;
            padding: 15px 20px;
            display: none;
            z-index: 1000;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }

        .cookie-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .cookie-text {
            flex: 1;
            min-width: 300px;
        }

        .cookie-text a {
            color: var(--secondary-color);
            text-decoration: underline;
            cursor: pointer;
        }

        .cookie-buttons {
            display: flex;
            gap: 10px;
        }

        .cookie-btn {
            padding: 8px 15px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
        }

        .cookie-accept {
            background-color: var(--success-color);
            color: white;
        }

        .cookie-settings {
            background-color: transparent;
            color: white;
            border: 1px solid white;
        }

        .cookie-reject {
            background-color: var(--error-color);
            color: white;
        }

        /* Modal de Política de Cookies */
        .cookie-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .cookie-modal.active {
            display: flex;
        }

        .modal-content {
            background-color: white;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            position: relative;
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            padding: 20px 25px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--primary-color);
            color: white;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0;
        }

        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .close-modal:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .modal-body {
            padding: 25px;
        }

        .policy-section {
            margin-bottom: 25px;
        }

        .policy-section h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .policy-section p {
            line-height: 1.6;
            margin-bottom: 10px;
            color: #555;
        }

        .policy-section ul {
            padding-left: 20px;
            margin-bottom: 10px;
        }

        .policy-section li {
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .modal-footer {
            padding: 15px 25px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }
            
            .welcome-panel {
                padding: 30px 20px;
            }
            
            .form-container {
                padding: 30px 20px;
            }
            
            .user-type-selector {
                grid-template-columns: 1fr;
            }
            
            .links-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .links-container a {
                margin: 5px 0;
            }
            
            .cookie-content {
                flex-direction: column;
                text-align: center;
            }
            
            .cookie-buttons {
                width: 100%;
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .welcome-panel h2 {
                font-size: 1.5rem;
            }
            
            .panel-icon {
                font-size: 3rem;
            }
            
            .form-title {
                font-size: 1.5rem;
            }
            
            .modal-content {
                width: 95%;
            }
        }
    </style>
</head>
<body>
    <!-- Header do portal -->
    <header>
        <div class="header-container">
            <div class="logo-container">
                <div class="portal-logo">
                    <i class="fas fa-graduation-cap" style="font-size: 3rem; color: var(--primary-color);"></i>
                </div>
                <h1 style="font-family: 'Bebas Neue', sans-serif; color: var(--primary-color); font-size: 1.8rem;">
                    Colégio Estadual Professor Júlio Szymanski
                </h1>
                <p class="header-slogan">Educação de qualidade para construir um futuro melhor</p>
            </div>
        </div>
    </header>

    <!-- Container Principal -->
    <div class="main-container">
        <!-- Painel de Boas-vindas -->
        <div class="welcome-panel">
            <div class="welcome-content">
                <div class="panel-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <h2 id="welcomeTitle">Bem-vindo de Volta!</h2>
                <p id="welcomeText">Entre em sua conta para acessar o portal educacional</p>
                
                <div class="feature-list">
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Acesso ao boletim e notas</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Comunicação com professores</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Calendário escolar</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Materiais de estudo</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Form Container -->
        <div class="form-container">
            <!-- Formulário de Login -->
            <div id="loginSection" class="form-section active">
                <h2 class="form-title">Login Portal Szymanski</h2>
                
                <div id="loginMessage" class="message"></div>
                
                <form id="loginForm">
                    <div class="user-type-selector">
                        <label class="user-type-option">
                            <input type="radio" name="tipo_usuario" value="aluno" required>
                            <div><i class="fas fa-user-graduate"></i> Aluno</div>
                        </label>
                        <label class="user-type-option">
                            <input type="radio" name="tipo_usuario" value="responsavel">
                            <div><i class="fas fa-users"></i> Responsável</div>
                        </label>
                        <label class="user-type-option">
                            <input type="radio" name="tipo_usuario" value="visitante">
                            <div><i class="fas fa-user"></i> Visitante</div>
                        </label>
                        <label class="user-type-option">
                            <input type="radio" name="tipo_usuario" value="outro">
                            <div><i class="fas fa-tools"></i> Outro</div>
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label for="loginEmail">Email:</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="loginSenha">Senha:</label>
                        <input type="password" id="loginSenha" required>
                    </div>
                    
                    <button type="submit" class="btn-primary">Entrar</button>
                </form>
                
                <div class="links-container">
                    <a href="#" id="goToRegister">
                        <i class="fas fa-user-plus"></i> Não tem conta? Cadastre-se
                    </a>
                </div>
            </div>

            <!-- Formulário de Cadastro -->
            <div id="registerSection" class="form-section">
                <h2 class="form-title">Criar Nova Conta</h2>
                
                <div id="registerMessage" class="message"></div>
                
                <form id="registerForm">
                    <div class="user-type-selector">
                        <label class="user-type-option">
                            <input type="radio" name="tipo_usuario_cadastro" value="aluno" required>
                            <div><i class="fas fa-user-graduate"></i> Aluno</div>
                        </label>
                        <label class="user-type-option">
                            <input type="radio" name="tipo_usuario_cadastro" value="responsavel">
                            <div><i class="fas fa-users"></i> Responsável</div>
                        </label>
                        <label class="user-type-option">
                            <input type="radio" name="tipo_usuario_cadastro" value="visitante">
                            <div><i class="fas fa-user"></i> Visitante</div>
                        </label>
                        <label class="user-type-option">
                            <input type="radio" name="tipo_usuario_cadastro" value="outro">
                            <div><i class="fas fa-tools"></i> Outro</div>
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label for="registerNome">Nome Completo:</label>
                        <input type="text" id="registerNome" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="registerEmail">Email:</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="registerSenha">Senha:</label>
                        <input type="password" id="registerSenha" required minlength="6">
                    </div>
                    
                    <div class="form-group">
                        <label for="registerConfirmarSenha">Confirmar Senha:</label>
                        <input type="password" id="registerConfirmarSenha" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="registerTelefone">Telefone:</label>
                        <input type="tel" id="registerTelefone">
                    </div>
                    
                    <button type="submit" class="btn-primary">Criar Conta</button>
                </form>
                
                <div class="links-container">
                    <a href="#" id="goToLogin">
                        <i class="fas fa-arrow-left"></i> Voltar para Login
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Cookie Banner -->
    <div class="cookie-banner" id="cookieBanner">
        <div class="cookie-content">
            <div class="cookie-text">
                <p>Utilizamos cookies para melhorar sua experiência em nosso site. Ao continuar navegando, você concorda com nossa <a href="#" id="cookiePolicyLink">Política de Cookies</a>.</p>
            </div>
            <div class="cookie-buttons">
                <button class="cookie-btn cookie-accept" id="cookieAcceptBtn">Aceitar Todos</button>
                <button class="cookie-btn cookie-reject" id="cookieRejectBtn">Rejeitar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Política de Cookies -->
    <div class="cookie-modal" id="cookieModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Política de Cookies</h2>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="policy-section">
                    <h3>O que são cookies?</h3>
                    <p>Cookies são pequenos arquivos de texto que são armazenados no seu dispositivo quando você visita nosso site. Eles nos ajudam a fornecer uma experiência melhor e mais personalizada para você.</p>
                </div>
                
                <div class="policy-section">
                    <h3>Como usamos os cookies?</h3>
                    <p>Utilizamos cookies para:</p>
                    <ul>
                        <li>Lembrar suas preferências e configurações</li>
                        <li>Melhorar a segurança do site</li>
                        <li>Entender como você usa nosso site</li>
                        <li>Oferecer conteúdo personalizado</li>
                        <li>Permitir funcionalidades sociais</li>
                    </ul>
                </div>
                
                <div class="policy-section">
                    <h3>Tipos de cookies que utilizamos</h3>
                    <ul>
                        <li><strong>Cookies essenciais:</strong> Necessários para o funcionamento básico do site</li>
                        <li><strong>Cookies de desempenho:</strong> Coletam informações sobre como os visitantes usam o site</li>
                        <li><strong>Cookies de funcionalidade:</strong> Lembram escolhas que você faz para melhorar sua experiência</li>
                        <li><strong>Cookies de marketing:</strong> Usados para rastrear visitantes em websites</li>
                    </ul>
                </div>
                
                <div class="policy-section">
                    <h3>Controle de cookies</h3>
                    <p>Você pode controlar e/ou excluir cookies conforme desejar. Você pode excluir todos os cookies que já estão no seu dispositivo e pode configurar a maioria dos navegadores para impedir que sejam colocados.</p>
                    <p>Ao rejeitar cookies, algumas funcionalidades do site podem não funcionar corretamente.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="cookie-btn cookie-reject" id="modalRejectBtn">Rejeitar Cookies</button>
                <button class="cookie-btn cookie-accept" id="modalAcceptBtn">Aceitar Todos</button>
            </div>
        </div>
    </div>

    <script>
        // Sistema de Banco de Dados Local
        class LocalDatabase {
            constructor() {
                this.dbName = 'PortalSzymanskiDB';
                this.version = 1;
                this.init();
            }

            init() {
                if (!localStorage.getItem(this.dbName)) {
                    this.createDefaultData();
                }
            }

            createDefaultData() {
                const defaultData = {
                    users: [
                        {
                            id: 1,
                            email: 'admin@szymanski.com',
                            senha: 'admin123',
                            tipo: 'admin',
                            nome: 'Administrador',
                            telefone: '',
                            dataCadastro: new Date().toISOString()
                        },
                        {
                            id: 2,
                            email: 'aluno@exemplo.com',
                            senha: 'aluno123',
                            tipo: 'aluno',
                            nome: 'João Silva',
                            telefone: '(11) 99999-9999',
                            dataCadastro: new Date().toISOString()
                        }
                    ],
                    settings: {
                        theme: 'light',
                        language: 'pt-br'
                    }
                };
                
                localStorage.setItem(this.dbName, JSON.stringify(defaultData));
                console.log('Banco de dados criado com sucesso!');
            }

            getDatabase() {
                const db = localStorage.getItem(this.dbName);
                return db ? JSON.parse(db) : null;
            }

            saveDatabase(data) {
                localStorage.setItem(this.dbName, JSON.stringify(data));
            }

            addUser(user) {
                const db = this.getDatabase();
                
                // Verificar se o email já existe
                if (this.findUserByEmail(user.email)) {
                    return { success: false, message: 'Email já cadastrado!' };
                }
                
                const newUser = {
                    id: db.users.length > 0 ? Math.max(...db.users.map(u => u.id)) + 1 : 1,
                    ...user,
                    dataCadastro: new Date().toISOString()
                };
                
                db.users.push(newUser);
                this.saveDatabase(db);
                return { success: true, user: newUser };
            }

            findUserByEmail(email) {
                const db = this.getDatabase();
                return db ? db.users.find(user => user.email === email) : null;
            }

            validateUser(email, senha) {
                const user = this.findUserByEmail(email);
                if (user && user.senha === senha) {
                    console.log('Usuário validado:', user);
                    return user;
                }
                console.log('Falha na validação do usuário');
                return null;
            }
        }

        // Sistema de Navegação entre Login e Cadastro
        class FormNavigator {
            constructor() {
                this.loginSection = document.getElementById('loginSection');
                this.registerSection = document.getElementById('registerSection');
                this.welcomeTitle = document.getElementById('welcomeTitle');
                this.welcomeText = document.getElementById('welcomeText');
                
                this.initEvents();
            }

            initEvents() {
                document.getElementById('goToRegister').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showRegister();
                });

                document.getElementById('goToLogin').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showLogin();
                });
            }

            showLogin() {
                this.loginSection.classList.add('active');
                this.registerSection.classList.remove('active');
                this.welcomeTitle.textContent = 'Bem-vindo de Volta!';
                this.welcomeText.textContent = 'Entre em sua conta para acessar o portal educacional';
                // Limpar mensagens
                document.getElementById('loginMessage').className = 'message';
                document.getElementById('registerMessage').className = 'message';
            }

            showRegister() {
                this.loginSection.classList.remove('active');
                this.registerSection.classList.add('active');
                this.welcomeTitle.textContent = 'Junte-se a Nós!';
                this.welcomeText.textContent = 'Crie sua conta para acessar todos os recursos do portal';
                // Limpar mensagens
                document.getElementById('loginMessage').className = 'message';
                document.getElementById('registerMessage').className = 'message';
            }
        }

        // Sistema de Gerenciamento de Cookies
        class CookieManager {
            constructor() {
                this.cookieConsent = this.getCookieConsent();
                this.cookieModal = document.getElementById('cookieModal');
                this.showBannerIfNeeded();
                this.initModalEvents();
            }

            getCookieConsent() {
                const consent = localStorage.getItem('cookieConsent');
                return consent ? JSON.parse(consent) : null;
            }

            setCookieConsent(consent) {
                localStorage.setItem('cookieConsent', JSON.stringify(consent));
                this.cookieConsent = consent;
            }

            showBannerIfNeeded() {
                if (!this.cookieConsent) {
                    setTimeout(() => {
                        document.getElementById('cookieBanner').style.display = 'block';
                    }, 1000);
                }
            }

            hideBanner() {
                document.getElementById('cookieBanner').style.display = 'none';
            }

            showModal() {
                this.cookieModal.classList.add('active');
            }

            hideModal() {
                this.cookieModal.classList.remove('active');
            }

            initModalEvents() {
                // Abrir modal quando clicar no link de política
                document.getElementById('cookiePolicyLink').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showModal();
                });

                // Fechar modal com o X
                document.getElementById('closeModal').addEventListener('click', () => {
                    this.hideModal();
                });

                // Fechar modal clicando fora
                this.cookieModal.addEventListener('click', (e) => {
                    if (e.target === this.cookieModal) {
                        this.hideModal();
                    }
                });

                // Aceitar cookies pelo modal
                document.getElementById('modalAcceptBtn').addEventListener('click', () => {
                    this.acceptAll();
                    this.hideModal();
                });

                // Rejeitar cookies pelo modal
                document.getElementById('modalRejectBtn').addEventListener('click', () => {
                    this.rejectAll();
                    this.hideModal();
                });
            }

            acceptAll() {
                const consent = {
                    essential: true,
                    performance: true,
                    functionality: true,
                    marketing: true,
                    timestamp: new Date().toISOString()
                };
                
                this.setCookieConsent(consent);
                this.hideBanner();
                alert('Cookies aceitos com sucesso!');
            }

            rejectAll() {
                const consent = {
                    essential: true, // Cookies essenciais não podem ser rejeitados
                    performance: false,
                    functionality: false,
                    marketing: false,
                    timestamp: new Date().toISOString()
                };
                
                this.setCookieConsent(consent);
                this.hideBanner();
                alert('Cookies não essenciais rejeitados. Algumas funcionalidades podem não estar disponíveis.');
            }
        }

        // Sistema de Mensagens
        class MessageSystem {
            static showMessage(elementId, message, type) {
                const element = document.getElementById(elementId);
                element.textContent = message;
                element.className = `message ${type}`;
                console.log(`Mensagem [${type}]: ${message}`);
            }

            static clearMessage(elementId) {
                const element = document.getElementById(elementId);
                element.className = 'message';
                element.textContent = '';
            }
        }

        // Inicialização do sistema
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Sistema iniciando...');
            
            // Inicializar banco de dados
            const database = new LocalDatabase();
            
            // Inicializar navegador de formulários
            const formNavigator = new FormNavigator();
            
            // Inicializar gerenciador de cookies
            const cookieManager = new CookieManager();
            
            // Configurar formulário de login
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                console.log('Tentativa de login...');
                
                const email = document.getElementById('loginEmail').value;
                const senha = document.getElementById('loginSenha').value;
                const tipoRadio = document.querySelector('input[name="tipo_usuario"]:checked');
                
                if (!tipoRadio) {
                    MessageSystem.showMessage('loginMessage', 'Selecione um tipo de usuário!', 'error');
                    return;
                }
                
                const user = database.validateUser(email, senha);
                
                if (user) {
                    MessageSystem.showMessage('loginMessage', 'Login realizado com sucesso!', 'success');
                    
                    // Salvar sessão do usuário
                    sessionStorage.setItem('currentUser', JSON.stringify(user));
                    
                    // Redirecionar para dashboard
                    setTimeout(() => {
                        window.location.href = 'dashboard.html';
                    }, 1500);
                } else {
                    MessageSystem.showMessage('loginMessage', 'Email ou senha incorretos!', 'error');
                }
            });
            
            // Configurar formulário de cadastro
            document.getElementById('registerForm').addEventListener('submit', function(e) {
                e.preventDefault();
                console.log('Tentativa de cadastro...');
                
                const nome = document.getElementById('registerNome').value;
                const email = document.getElementById('registerEmail').value;
                const senha = document.getElementById('registerSenha').value;
                const confirmarSenha = document.getElementById('registerConfirmarSenha').value;
                const telefone = document.getElementById('registerTelefone').value;
                const tipoRadio = document.querySelector('input[name="tipo_usuario_cadastro"]:checked');
                
                if (!tipoRadio) {
                    MessageSystem.showMessage('registerMessage', 'Selecione um tipo de usuário!', 'error');
                    return;
                }
                
                if (senha !== confirmarSenha) {
                    MessageSystem.showMessage('registerMessage', 'As senhas não coincidem!', 'error');
                    return;
                }
                
                if (senha.length < 6) {
                    MessageSystem.showMessage('registerMessage', 'A senha deve ter pelo menos 6 caracteres!', 'error');
                    return;
                }
                
                const tipo = tipoRadio.value;
                const result = database.addUser({
                    nome,
                    email,
                    senha,
                    tipo,
                    telefone
                });
                
                if (result.success) {
                    MessageSystem.showMessage('registerMessage', 'Conta criada com sucesso! Redirecionando para login...', 'success');
                    
                    // Limpar formulário
                    document.getElementById('registerForm').reset();
                    
                    // Voltar para login após 2 segundos
                    setTimeout(() => {
                        formNavigator.showLogin();
                        MessageSystem.showMessage('loginMessage', 'Conta criada! Agora faça login.', 'success');
                    }, 2000);
                } else {
                    MessageSystem.showMessage('registerMessage', result.message, 'error');
                }
            });
            
            // Seleção visual dos tipos de usuário
            document.querySelectorAll('.user-type-option').forEach(option => {
                option.addEventListener('click', function() {
                    const parent = this.closest('.user-type-selector');
                    parent.querySelectorAll('.user-type-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    this.querySelector('input').checked = true;
                });
            });
            
            // Configurar eventos dos cookies
            document.getElementById('cookieAcceptBtn').addEventListener('click', function() {
                cookieManager.acceptAll();
            });
            
            document.getElementById('cookieRejectBtn').addEventListener('click', function() {
                cookieManager.rejectAll();
            });

            // Auto-selecionar primeiro tipo de usuário
            document.querySelector('.user-type-option input').checked = true;
            document.querySelector('.user-type-option').classList.add('selected');
        });
    </script>
</body>
</html>
