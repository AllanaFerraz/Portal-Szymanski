<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - Portal Szymanski</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/estilo.css">
    <link rel="stylesheet" href="css/login.css">
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo-container">
                <img src="images/logo.png" 
                     alt="Colégio Estadual Professor Júlio Szymanski" class="portal-logo">
                <p class="header-slogan">Educação de qualidade para construir um futuro melhor</p>
            </div>
        </div>
    </header>

    <div class="login-container">
        <h2>Cadastro Portal Szymanski</h2>
        
        <div id="cadastroMessage" class="message"></div>
        
        <form id="cadastroForm">
            <div class="form-group">
                <label>Tipo de Usuário:</label>
                <select id="tipoUsuario" required onchange="mostrarCamposEspecificos()">
                    <option value="">Selecione...</option>
                    <option value="aluno">Aluno</option>
                    <option value="responsavel">Responsável</option>
                    <option value="visitante">Visitante</option>
                    <option value="outro">Outro</option>
                </select>
            </div>
            
            <div id="campoAluno" class="campo-dinamico">
                <div class="form-group">
                    <label>Matrícula:</label>
                    <input type="text" id="matricula">
                </div>
            </div>
            
            <div class="form-group">
                <label>Nome Completo:</label>
                <input type="text" id="nomeCompleto" required>
            </div>
            
            <div class="form-group">
                <label>Email:</label>
                <input type="email" id="email" required>
            </div>
            
            <div class="form-group">
                <label>Senha:</label>
                <input type="password" id="senha" required minlength="6">
            </div>
            
            <div class="form-group">
                <label>Confirmar Senha:</label>
                <input type="password" id="confirmarSenha" required>
            </div>
            
            <button type="submit" class="btn-login">Cadastrar</button>
        </form>
        
        <p style="text-align: center; margin-top: 20px;">
            <a href="index.html">Já tem conta? Faça login</a>
        </p>
    </div>

    <script src="js/database.js"></script>
    <script src="js/auth.js"></script>
    
    <script>
        initDatabase();
        
        document.getElementById('cadastroForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const senha = document.getElementById('senha').value;
            const confirmarSenha = document.getElementById('confirmarSenha').value;
            
            if (senha !== confirmarSenha) {
                document.getElementById('cadastroMessage').textContent = 'As senhas não coincidem!';
                document.getElementById('cadastroMessage').className = 'message error';
                return;
            }
            
            const resultado = cadastrarUsuario({
                tipo_usuario: document.getElementById('tipoUsuario').value,
                nome_completo: document.getElementById('nomeCompleto').value,
                email: document.getElementById('email').value,
                senha: senha
            });
            
            if (resultado.success) {
                document.getElementById('cadastroMessage').textContent = resultado.message;
                document.getElementById('cadastroMessage').className = 'message success';
                
                // Limpar formulário
                document.getElementById('cadastroForm').reset();
                
                // Redirecionar após 2 segundos
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 2000);
            } else {
                document.getElementById('cadastroMessage').textContent = resultado.message;
                document.getElementById('cadastroMessage').className = 'message error';
            }
        });
        
        function mostrarCamposEspecificos() {
            const tipo = document.getElementById('tipoUsuario').value;
            document.getElementById('campoAluno').style.display = tipo === 'aluno' ? 'block' : 'none';
        }
    </script>
</body>
</html>
